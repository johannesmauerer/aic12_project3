<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich">



	<ui:composition>

		<h:head >
			<title>Advanced Internet Computing</title>
			<link href="styles/style.css" rel="stylesheet" type="text/css"/>
		</h:head>
		<h:body id="body">

			<div id="header">
					<h:graphicImage value="img/header.jpg"/>
			</div>

		<h2> Welcome back <i><h:outputText value="#{user.name}" /></i>!</h2> 
		
		 
		<h:panelGrid id="panel" columns="5" border="1" cellpadding="0" cellspacing="2">

			    <f:facet name="header">
					<h:outputText id="title" value="Your previous sentiment analysis results" />
				</f:facet>
					<h:outputText value="Id" />
		            <h:outputText value="Company Name" />
		        	<h:outputText value="From" />
		            <h:outputText value="To" />
		            <h:outputText value="Number of Tweets" />
		            
				<c:forEach items="#{user.pastRequest}" var="pastReq">
			        
			            <h:outputText value="#{pastReq.id}" />
			            <h:outputText value="#{pastReq.companyName}" />
			        	<h:outputText value="#{pastReq.from}" />
			            <h:outputText value="#{pastReq.to}" />
			            <h:outputText value="#{pastReq.numberOfTweets}" />
			    </c:forEach>
			</h:panelGrid>
			 
		<h:form>
			<div id="buttons">
				<h:commandButton value="See Analysis Statistics" action="#{sentimentRequest.getAnalysisStatistics}"></h:commandButton>
			</div>
		</h:form>

		<!-- setting companyName -->
		<c:set value="#{user.name}" target="#{sentimentRequest}" property="companyName" />

		<f:view>
			<h:form>
				<div>
					<h3>Choose period for your sentiment analysis:</h3>
					<h4>From:</h4>
					<rich:calendar value="#{sentimentRequest.from}"
                        popup="true"
                        time="dd/MM/yyyy"
                        showInput="true"
                        cellWidth="24px" 
                        cellHeight="22px" 
                        style="width:200px"
                        required="true"/>
					<h4>To:</h4> 
					<rich:calendar value="#{sentimentRequest.to}"
                        popup="true"
                        time="dd/MM/yyyy"
                        showInput="true" 
                        cellWidth="24px" 
                        cellHeight="22px" 
                        style="width:200px"
                        required="true"/> 
				</div>	

				<div id="buttons">
					<h:commandButton value="Start anylysis" action="#{sentimentRequest.sendToAnalysis}"></h:commandButton>
				</div>
			</h:form>	
			<div id="footer">
				<p><h:graphicImage value="img/icone.jpg"/> 2012 AIC - Cloud computing</p>
			</div>
		</f:view>
	</h:body>

	</ui:composition>
</html>