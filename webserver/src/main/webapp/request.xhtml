<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich">



<ui:composition>

	<h:head>
		<title>Advanced Internet Computing</title>
		<link href="styles/style.css" rel="stylesheet" type="text/css" />
		<!-- <h:outputScript name="jsf.js" library="javax.faces" target="head"/> -->
	</h:head>
	<h:body>
		<div id="box">
			<div id="header">
				<h:graphicImage value="img/header.jpg" />
			</div>
			<div id="bodyPart">
			<h:form>
				
					<h2>Welcome <h:outputLabel id="backWelcome" rendered="#{user.loggedIn eq 'true'}" value="back" /> <i><h:outputText value="#{user.name}" /></i>! </h2>
					
						<h:panelGrid id="scrollableTable" rendered="#{user.loggedIn eq 'true'}" columns="7" border="1" cellpadding="0" cellspacing="2">

							<f:facet name="header">
								<h:outputText id="title"
									value="Your previous sentiment analysis results" />
							</f:facet>

							<h:outputText value="Company Name" />
							<h:outputText value="From" />
							<h:outputText value="To" />
							<h:outputText value="Number of Tweets" />
							<h:outputText value="Minimum" />
							<h:outputText value="Maximum" />
							<h:outputText value="Sentiment" />

							<c:forEach items="#{user.requestStats}" var="reqStats">

								<h:outputText value="#{user.name}" />
								<h:outputText value="#{reqStats.from}" />
								<h:outputText value="#{reqStats.to}" />
								<h:outputText value="#{reqStats.tweets}" />
								<h:outputText value="#{reqStats.intervalMin}" />
								<h:outputText value="#{reqStats.intervalMax}" />
								<h:outputText value="#{reqStats.sentiment}" />

							</c:forEach>
						</h:panelGrid>
					<!-- <f:ajax event="keyup" execute="user.loggedIn==true" render="backWelcome scrollableTable" /> -->
				
			</h:form>
			<h:form>
				<div id="buttons">
					<h:commandButton value="See Analysis Statistics"
						action="#{sentimentRequest.getAnalysisStatistics}"></h:commandButton>

				</div>
				
			</h:form>

			<!-- setting companyName -->
			<c:set value="#{user.name}" target="#{sentimentRequest}"
				property="companyName" />

			<f:view>
				<h:form>
					<h3>Choose period for your sentiment analysis:</h3>
					<p>
						<span id="calenderInput">
							<div id="calendarText">
								<h4>From:</h4>
							</div>
							<div id="calendar">
								<rich:calendar value="#{sentimentRequest.from}" popup="true"
									time="dd/MM/yyyy" showInput="true" cellWidth="24px"
									cellHeight="22px" style="width:200px" required="true" />
							</div>
						</span>
					</p>
					<div id="clearLeft"></div>
					<span id="calenderInput">
						<div id="calendarText">
							<h4>To:</h4>
						</div>
						<div id="calendar">
							<rich:calendar value="#{sentimentRequest.to}" popup="true"
								time="dd/MM/yyyy" showInput="true" cellWidth="24px"
								cellHeight="22px" style="width:200px" required="true" />
						</div>
					</span>
					<div id="clearLeft"></div>

					<div id="buttons">
						<h:commandButton value="Start anylysis"
							action="#{sentimentRequest.sendToAnalysis}"></h:commandButton>
					</div>
				</h:form>
			</f:view>
		</div>
		<div id="footer">
			<p>
				<h:graphicImage value="img/icone.jpg" />
				2012 AIC - Cloud computing
			</p>
		</div>
		</div>
	</h:body>

</ui:composition>
</html>
